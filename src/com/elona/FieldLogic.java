/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.elona;

import com.elona.constants.Operation;
import com.elona.graphic.operation.GraphicOperation;
import com.elona.graphic.operation.GraphicOperationCoodinates;
import com.elona.graphic.operation.GraphicOperationChipID;
import java.util.ArrayList;
import java.util.Queue;
import javafx.scene.input.KeyCode;

public class FieldLogic {
    Queue<GraphicOperation> graphicOperationQueue;
    ArrayList<KeyCode> input;
    
    int cx=18;
    int cy=0;
            
    int dx=0;
    int dy=0;
            
    int mapChipID[][] = {
        {337, 342, 340, 336, 337, 331, 361, 331, 336, 349, 336, 330, 340, 339, 347, 346, 346, 347, 332, 332, 335, 332, 332, 332, 332, 337, 335, 361, 336, 340, 335, 333}, 
        {336, 340, 341, 335, 335, 343, 361, 362, 331, 336, 343, 349, 330, 340, 349, 347, 348, 346, 347, 349, 332, 362, 342, 337, 338, 342, 337, 361, 567, 340, 334, 333}, 
        {335, 340, 334, 335, 333, 333, 361, 564, 567, 566, 568, 338, 362, 340, 339, 347, 346, 346, 348, 348, 347, 338, 332, 342, 349, 343, 335, 361, 335, 340, 335, 334}, 
        {340, 341, 334, 335, 333, 334, 361, 331, 567, 564, 336, 338, 338, 330, 340, 349, 347, 346, 346, 346, 346, 347, 349, 332, 332, 330, 335, 361, 340, 341, 334, 334}, 
        {360, 360, 360, 360, 360, 360, 359, 360, 360, 360, 360, 564, 338, 330, 340, 342, 342, 349, 347, 348, 348, 346, 347, 462, 627, 565, 567, 359, 340, 333, 362, 334}, 
        {340, 362, 335, 335, 336, 337, 336, 565, 362, 331, 331, 343, 331, 330, 340, 342, 342, 335, 330, 347, 346, 346, 346, 462, 462, 462, 462, 462, 462, 335, 335, 333}, 
        {340, 342, 337, 343, 336, 335, 343, 336, 330, 342, 331, 331, 330, 466, 466, 466, 466, 466, 466, 337, 346, 346, 346, 462, 132, 132, 132, 132, 462, 342, 334, 334}, 
        {341, 330, 466, 466, 466, 466, 466, 466, 466, 466, 331, 330, 336, 466, 212, 212, 136, 136, 466, 332, 346, 346, 346, 190, 132, 132, 132, 132, 462, 568, 335, 334}, 
        {336, 337, 466, 213, 213, 466, 213, 213, 213, 466, 466, 466, 466, 466, 212, 212, 136, 136, 652, 332, 346, 346, 346, 190, 132, 132, 132, 132, 462, 566, 335, 338}, 
        {335, 330, 466, 213, 213, 466, 213, 213, 213, 466, 146, 146, 146, 466, 136, 136, 136, 136, 209, 332, 348, 346, 348, 462, 132, 132, 132, 132, 462, 567, 362, 336}, 
        {337, 336, 466, 213, 213, 466, 213, 213, 213, 466, 146, 146, 146, 466, 136, 136, 136, 136, 209, 346, 348, 346, 462, 462, 462, 462, 462, 462, 462, 462, 336, 337}, 
        {349, 337, 466, 466, 138, 466, 466, 213, 213, 466, 146, 146, 146, 466, 136, 136, 136, 136, 209, 346, 346, 346, 462, 218, 218, 218, 462, 146, 146, 462, 336, 333}, 
        {336, 335, 466, 138, 138, 138, 138, 213, 213, 466, 466, 136, 136, 466, 466, 466, 136, 136, 652, 332, 346, 346, 647, 218, 218, 218, 218, 146, 146, 462, 337, 334}, 
        {337, 362, 466, 138, 138, 138, 466, 213, 213, 466, 136, 136, 136, 136, 136, 466, 136, 136, 466, 342, 346, 346, 209, 218, 218, 218, 462, 462, 462, 462, 332, 335}, 
        {338, 337, 466, 466, 466, 138, 466, 466, 466, 466, 136, 136, 136, 136, 136, 466, 466, 466, 466, 337, 346, 346, 209, 218, 218, 218, 218, 146, 146, 462, 337, 332}, 
        {337, 330, 566, 627, 330, 330, 330, 330, 340, 466, 136, 136, 136, 136, 136, 466, 566, 332, 332, 342, 346, 346, 647, 218, 218, 218, 462, 146, 146, 462, 330, 335}, 
        {330, 330, 330, 330, 335, 349, 362, 340, 341, 466, 651, 136, 136, 651, 466, 466, 564, 361, 332, 347, 348, 346, 462, 218, 218, 218, 462, 462, 462, 462, 332, 330}, 
        {330, 330, 349, 347, 346, 347, 349, 340, 332, 332, 330, 349, 330, 330, 335, 340, 330, 361, 349, 346, 346, 346, 462, 218, 218, 218, 218, 146, 146, 462, 338, 362}, 
        {330, 349, 347, 348, 346, 346, 346, 348, 346, 348, 346, 346, 347, 330, 330, 340, 332, 361, 347, 348, 346, 346, 462, 462, 218, 218, 462, 146, 146, 462, 330, 337}, 
        {349, 332, 332, 332, 347, 348, 348, 346, 348, 346, 348, 346, 348, 346, 349, 346, 347, 361, 346, 346, 346, 346, 346, 462, 218, 218, 462, 462, 462, 462, 332, 330}, 
        {332, 330, 349, 362, 330, 335, 330, 340, 330, 330, 330, 347, 346, 349, 346, 347, 349, 361, 347, 346, 348, 348, 346, 657, 218, 218, 218, 462, 627, 330, 335, 349}, 
        {337, 332, 335, 337, 332, 332, 332, 340, 338, 330, 330, 330, 335, 349, 349, 340, 362, 361, 330, 349, 346, 346, 346, 209, 218, 218, 218, 462, 564, 337, 349, 346}, 
        {330, 338, 337, 467, 467, 71, 467, 467, 565, 360, 360, 360, 360, 359, 332, 340, 332, 359, 337, 342, 346, 348, 346, 209, 218, 218, 218, 462, 330, 330, 347, 346}, 
        {330, 332, 335, 467, 71, 71, 71, 467, 467, 71, 467, 467, 332, 361, 466, 466, 466, 466, 466, 466, 346, 346, 346, 657, 218, 218, 218, 462, 330, 347, 346, 348}, 
        {338, 335, 334, 467, 70, 71, 71, 467, 71, 71, 71, 467, 342, 361, 466, 111, 111, 111, 111, 648, 346, 348, 346, 462, 218, 218, 218, 462, 335, 346, 348, 348}, 
        {337, 334, 333, 467, 71, 71, 71, 467, 71, 71, 71, 467, 332, 361, 466, 111, 111, 111, 111, 190, 346, 346, 346, 462, 462, 462, 462, 462, 332, 346, 348, 346}, 
        {337, 334, 333, 467, 71, 71, 71, 467, 71, 71, 71, 467, 564, 361, 466, 111, 111, 111, 111, 190, 346, 346, 346, 346, 349, 337, 330, 338, 347, 346, 346, 346}, 
        {334, 335, 333, 467, 71, 71, 70, 467, 71, 71, 71, 467, 567, 361, 466, 111, 111, 111, 111, 648, 330, 346, 346, 347, 332, 565, 332, 332, 346, 346, 346, 349}, 
        {335, 334, 467, 467, 467, 467, 467, 467, 71, 71, 71, 467, 565, 361, 466, 111, 111, 111, 466, 466, 330, 347, 346, 349, 349, 349, 347, 347, 348, 346, 347, 330}, 
        {336, 335, 467, 71, 71, 71, 71, 467, 71, 71, 71, 467, 567, 361, 466, 111, 111, 111, 466, 566, 360, 360, 360, 360, 360, 360, 360, 360, 360, 359, 362, 342}, 
        {337, 362, 467, 71, 71, 71, 71, 467, 467, 467, 467, 467, 467, 361, 466, 111, 111, 111, 466, 567, 362, 332, 347, 348, 346, 346, 346, 346, 346, 361, 564, 330}, 
        {335, 336, 467, 71, 71, 71, 71, 467, 71, 71, 71, 71, 467, 361, 466, 111, 111, 111, 466, 568, 332, 332, 346, 348, 346, 348, 346, 347, 342, 361, 567, 337}, 
        {336, 337, 467, 71, 71, 71, 71, 467, 71, 71, 71, 71, 467, 361, 466, 111, 111, 111, 466, 330, 349, 362, 346, 348, 346, 346, 347, 335, 564, 359, 360, 360}, 
        {335, 332, 467, 467, 467, 71, 71, 467, 70, 71, 71, 71, 467, 361, 466, 111, 111, 111, 466, 339, 337, 349, 346, 346, 346, 346, 349, 332, 330, 337, 335, 335}, 
        {334, 334, 332, 567, 467, 71, 71, 467, 467, 467, 71, 467, 467, 361, 466, 466, 466, 466, 466, 340, 332, 347, 346, 346, 346, 346, 332, 332, 566, 627, 337, 342}, 
        {334, 335, 342, 330, 467, 467, 71, 467, 565, 332, 332, 332, 342, 361, 349, 332, 330, 338, 335, 340, 332, 346, 346, 659, 212, 212, 659, 465, 465, 465, 343, 338}, 
        {333, 334, 342, 342, 342, 342, 336, 340, 332, 349, 332, 347, 346, 361, 347, 348, 346, 347, 332, 340, 347, 346, 465, 465, 212, 212, 212, 212, 212, 465, 330, 338}, 
        {333, 333, 334, 343, 342, 342, 336, 336, 336, 332, 347, 346, 347, 361, 346, 346, 346, 348, 346, 346, 346, 348, 465, 465, 212, 212, 212, 212, 212, 465, 337, 336}, 
        {333, 333, 335, 332, 337, 332, 336, 340, 336, 336, 349, 347, 349, 361, 332, 347, 348, 348, 348, 348, 346, 348, 465, 212, 212, 212, 212, 212, 212, 465, 336, 337}, 
        {333, 334, 338, 336, 342, 362, 336, 340, 339, 335, 332, 332, 362, 361, 332, 332, 338, 349, 347, 346, 346, 465, 465, 212, 212, 212, 212, 212, 212, 465, 337, 335}, 
        {334, 343, 337, 568, 332, 336, 336, 332, 340, 332, 362, 332, 330, 361, 332, 332, 362, 332, 337, 340, 335, 465, 212, 212, 212, 212, 212, 212, 212, 465, 336, 333}, 
        {339, 337, 332, 336, 362, 336, 337, 336, 340, 564, 360, 360, 360, 359, 360, 360, 360, 359, 330, 340, 465, 465, 212, 212, 212, 212, 212, 212, 212, 465, 338, 334}, 
        {340, 339, 338, 335, 343, 335, 343, 362, 340, 339, 332, 332, 332, 332, 349, 332, 330, 361, 565, 340, 465, 212, 212, 212, 212, 212, 212, 212, 465, 465, 335, 334}, 
        {331, 340, 339, 349, 337, 336, 568, 335, 334, 340, 338, 332, 332, 332, 332, 362, 332, 361, 332, 340, 465, 212, 212, 212, 212, 212, 212, 465, 465, 564, 333, 333}, 
        {337, 331, 340, 332, 337, 332, 335, 334, 333, 340, 334, 335, 115, 115, 115, 115, 337, 361, 340, 341, 465, 212, 212, 212, 212, 212, 465, 465, 564, 361, 334, 333}, 
        {336, 331, 340, 332, 336, 337, 334, 466, 466, 466, 466, 466, 115, 168, 168, 115, 335, 361, 340, 335, 465, 465, 465, 465, 465, 465, 465, 565, 567, 361, 335, 333}, 
        {336, 336, 336, 337, 336, 336, 335, 466, 71, 71, 71, 466, 115, 168, 168, 115, 332, 361, 340, 335, 335, 332, 342, 342, 342, 337, 336, 337, 335, 361, 333, 334}, 
        {331, 336, 340, 336, 332, 335, 343, 466, 71, 71, 71, 190, 115, 168, 168, 115, 332, 361, 340, 337, 332, 334, 333, 333, 334, 336, 335, 335, 335, 361, 334, 334}, 
        {336, 337, 340, 339, 335, 332, 332, 466, 71, 71, 71, 190, 115, 168, 168, 115, 332, 359, 340, 339, 336, 332, 334, 332, 332, 332, 335, 335, 335, 361, 334, 333}, 
        {331, 335, 331, 340, 332, 334, 336, 466, 71, 71, 71, 466, 115, 115, 115, 115, 349, 332, 336, 340, 334, 337, 332, 334, 332, 334, 332, 335, 335, 361, 334, 334}, 
        {337, 331, 337, 340, 334, 335, 340, 466, 71, 71, 71, 466, 332, 332, 332, 332, 335, 332, 334, 340, 332, 337, 332, 332, 332, 336, 332, 335, 333, 361, 333, 333}, 
        {331, 336, 337, 340, 336, 335, 340, 466, 466, 466, 466, 466, 349, 332, 335, 332, 332, 336, 334, 340, 337, 332, 334, 336, 332, 337, 336, 334, 333, 361, 334, 334}, 
        {336, 331, 331, 340, 334, 340, 341, 336, 332, 332, 332, 332, 332, 332, 332, 332, 338, 332, 334, 340, 334, 332, 332, 332, 332, 336, 332, 333, 334, 361, 334, 334} 
    };
    int mapXlen,mapYlen;
    
    FieldLogic(Queue<GraphicOperation> q,ArrayList<KeyCode> i){
        graphicOperationQueue = q;
        input = i;
        
        mapXlen=mapChipID.length;
        mapYlen=mapChipID[0].length;
        graphicOperationQueue.offer(new GraphicOperationChipID(Operation.initializeMap,mapChipID));
        graphicOperationQueue.offer(new GraphicOperationCoodinates(Operation.relocatePC,cx,cy));
    }
    
    
        
            
    public void update(){
        dx=cx; dy=cy;
        if (input.contains(KeyCode.RIGHT) && cx<mapXlen-1)
            cx++; graphicOperationQueue.offer(new GraphicOperationCoodinates(Operation.relocatePC,cx,cy));
        if (input.contains(KeyCode.LEFT) && 0<cx)
            cx--; graphicOperationQueue.offer(new GraphicOperationCoodinates(Operation.relocatePC,cx,cy));
        if (input.contains(KeyCode.DOWN) && cy<mapYlen-1)
            cy++; graphicOperationQueue.offer(new GraphicOperationCoodinates(Operation.relocatePC,cx,cy));
        if (input.contains(KeyCode.UP) && 0<cy)
            cy--; graphicOperationQueue.offer(new GraphicOperationCoodinates(Operation.relocatePC,cx,cy));
    }
    
    
        
        
    
}
